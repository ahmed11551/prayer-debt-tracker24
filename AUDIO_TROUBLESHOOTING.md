# Решение проблем с аудио

## Почему аудио может быть недоступно?

### 1. ID дуа не совпадают с API

**Проблема**: Локальные ID дуа (например, `"sleep-1"`, `"kalima-1"`) могут не совпадать с ID в базе данных e-Replika API.

**Решение**: 
- Приложение пытается загрузить аудио из API используя несколько вариантов эндпоинтов
- Если аудио не найдено, автоматически используется **синтез речи браузера (TTS)** как fallback
- Это нормальное поведение - не все дуа могут быть в базе API

### 2. API недоступен или требует авторизацию

**Проверьте**:
- Правильно ли настроен `VITE_API_BASE_URL` в `.env`
- Правильно ли настроен токен авторизации (`test_token_123` по умолчанию)
- Доступен ли API по адресу `https://bot.e-replika.ru/api`

### 3. Браузер не поддерживает синтез речи

**Проблема**: Если API не вернул аудио, и браузер не поддерживает TTS, аудио будет недоступно.

**Решение**: 
- Используйте современный браузер (Chrome, Firefox, Edge, Safari)
- Проверьте настройки браузера для синтеза речи

### 4. CORS ошибки

**Проблема**: API может блокировать запросы из-за CORS политики.

**Решение**: 
- API должен разрешать запросы с вашего домена
- Проверьте заголовки CORS в ответах API

## Как проверить, что происходит?

1. Откройте консоль браузера (F12)
2. Посмотрите логи:
   - `Audio loaded successfully for dua {id}` - аудио загружено
   - `Audio not found in API for dua {id}, TTS will be used` - используется TTS
   - `Error loading audio from API` - ошибка загрузки

## Текущее поведение

- ✅ Приложение пытается загрузить аудио из API
- ✅ Если не найдено - используется TTS (синтез речи)
- ✅ Если TTS недоступен - показывается сообщение
- ✅ Все ошибки логируются в консоль

## Рекомендации

1. **Для разработки**: Проверьте логи в консоли браузера
2. **Для продакшена**: Убедитесь, что API доступен и правильно настроен
3. **Для пользователей**: TTS работает как надежный fallback, если API недоступен

